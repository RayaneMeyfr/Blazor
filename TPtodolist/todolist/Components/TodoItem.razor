@using todolist.Model

<li class="list-group-item d-flex justify-content-between align-items-center">
    <div class="form-check">
        <input type="checkbox" class="form-check-input me-2" checked="@Task.IsCompleted" @onchange="OnCheckboxChanged" />

        <span style="@(Task.IsCompleted ? "text-decoration: line-through;" : "")">
            @Task.Title
        </span>
    </div>

    <button class="btn btn-danger btn-sm" @onclick="() => OnDeleteSelection.InvokeAsync(Task.Id)">
        🗑 Supprimer
    </button>
</li>

@code {
    [Parameter]
    public TodoTask Task { get; set; } = new TodoTask(1, "default", false);

    [Parameter]
    public EventCallback<int> OnDeleteSelection { get; set; }

    [Parameter]
    public EventCallback<TodoTask> OnStatusChanged { get; set; }

    private async Task OnCheckboxChanged(ChangeEventArgs e)
    {
        Task.IsCompleted = (bool)e.Value!;
        await OnStatusChanged.InvokeAsync(Task);
    }
}
